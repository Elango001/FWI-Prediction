<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Batch FWI Prediction</title>
    <style>
      :root {
        --bg-gradient-start: #667eea;
        --bg-gradient-mid: #764ba2;
        --bg-gradient-end: #667eea;
        --container-bg: #ffffff;
        --text-primary: #333333;
        --text-secondary: #666666;
        --border-color: #667eea;
        --shadow-color: rgba(0, 0, 0, 0.3);
      }

      body.dark-mode {
        --bg-gradient-start: #1a1a2e;
        --bg-gradient-mid: #16213e;
        --bg-gradient-end: #1a1a2e;
        --container-bg: #0f3460;
        --text-primary: #e0e0e0;
        --text-secondary: #b0b0b0;
        --border-color: #e94560;
        --shadow-color: rgba(0, 0, 0, 0.7);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      @keyframes gradientMove {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          var(--bg-gradient-start) 0%,
          var(--bg-gradient-mid) 50%,
          var(--bg-gradient-end) 100%
        );
        background-size: 200% 200%;
        animation: gradientMove 15s ease infinite;
        min-height: 100vh;
        padding: 20px;
        transition: all 0.3s ease;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: var(--container-bg);
        border-radius: 15px;
        box-shadow: 0 20px 60px var(--shadow-color);
        overflow: hidden;
        animation: float 6s ease-in-out infinite;
        transition: all 0.3s ease;
      }

      .header {
        background: linear-gradient(
          135deg,
          var(--bg-gradient-start) 0%,
          var(--bg-gradient-mid) 100%
        );
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
      }

      .theme-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50px;
        padding: 10px 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
      }

      .theme-toggle-icon {
        font-size: 1.5em;
      }

      .theme-toggle-text {
        font-size: 0.9em;
        font-weight: 600;
        color: white;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.1em;
        opacity: 0.9;
      }

      .nav-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
      }

      .nav-btn {
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 2px solid white;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s;
      }

      .nav-btn:hover {
        background: white;
        color: #667eea;
      }

      .content {
        padding: 40px;
      }

      .upload-section {
        text-align: center;
        padding: 40px;
        background: #f8f9fa;
        border-radius: 12px;
        margin-bottom: 30px;
      }

      .upload-icon {
        font-size: 4em;
        margin-bottom: 20px;
      }

      .file-input-wrapper {
        position: relative;
        display: inline-block;
        cursor: pointer;
        margin-bottom: 20px;
      }

      .file-input-wrapper input[type="file"] {
        position: absolute;
        left: -9999px;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .file-input-label {
        display: inline-block;
        padding: 15px 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1.1em;
        transition: all 0.3s;
        animation: pulse 2s ease-in-out infinite;
      }

      .file-input-label:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        animation: none;
      }

      .file-name {
        margin-top: 15px;
        font-size: 0.95em;
        color: #666;
        min-height: 20px;
      }

      @keyframes glow {
        0%,
        100% {
          box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
        }
        50% {
          box-shadow: 0 10px 40px rgba(40, 167, 69, 0.6);
        }
      }

      .submit-btn {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        padding: 15px 40px;
        border: none;
        border-radius: 8px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 20px;
        animation: glow 2s ease-in-out infinite;
      }

      .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
      }

      .submit-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
        animation: none;
      }

      .info-section {
        background: #e3f2fd;
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 25px;
        border-left: 4px solid #2196f3;
      }

      .info-section h3 {
        color: #1976d2;
        margin-bottom: 15px;
        font-size: 1.3em;
      }

      .info-section ul {
        list-style: none;
        padding: 0;
      }

      .info-section li {
        padding: 8px 0;
        color: #555;
        position: relative;
        padding-left: 25px;
      }

      .info-section li:before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: #28a745;
        font-weight: bold;
      }

      .example-section {
        background: #fff3cd;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #ffc107;
      }

      .example-section h3 {
        color: #856404;
        margin-bottom: 10px;
      }

      .example-section code {
        display: block;
        background: white;
        padding: 15px;
        border-radius: 6px;
        margin-top: 10px;
        overflow-x: auto;
        font-size: 0.9em;
      }

      .download-sample {
        display: inline-block;
        margin-top: 10px;
        padding: 8px 20px;
        background: #ffc107;
        color: #000;
        text-decoration: none;
        border-radius: 6px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .download-sample:hover {
        background: #ffca28;
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="theme-toggle" onclick="toggleTheme()">
          <span class="theme-toggle-icon" id="themeIcon">üåô</span>
          <span class="theme-toggle-text" id="themeText">Dark</span>
        </div>
        <h1>üìä Batch FWI Prediction</h1>
        <p>Upload CSV file for bulk predictions</p>
        <div class="nav-buttons">
          <a href="/" class="nav-btn">Single Prediction</a>
          <a
            href="/batch_predict"
            class="nav-btn"
            style="background: white; color: #667eea"
            >Batch Prediction</a
          >
        </div>
      </div>

      <div class="content">
        <form
          action="/batch_predict"
          method="post"
          enctype="multipart/form-data"
          id="uploadForm"
        >
          <div class="upload-section">
            <div class="upload-icon">üìÅ</div>
            <h2>Upload Your CSV File</h2>
            <p style="color: #666; margin: 15px 0">
              Select a CSV file containing your dataset
            </p>

            <div class="file-input-wrapper">
              <input
                type="file"
                id="fileInput"
                name="file"
                accept=".csv"
                required
              />
              <label for="fileInput" class="file-input-label">
                Choose CSV File
              </label>
            </div>

            <div class="file-name" id="fileName">No file selected</div>

            <button type="submit" class="submit-btn" id="submitBtn" disabled>
              Predict All Rows
            </button>
          </div>
        </form>

        <div class="info-section">
          <h3>Required CSV Format</h3>
          <ul>
            <li><strong>Temperature</strong> - Air temperature in ¬∞C</li>
            <li><strong>RH</strong> - Relative Humidity (%)</li>
            <li><strong>Ws</strong> - Wind Speed (km/h)</li>
            <li><strong>Rain</strong> - Rainfall amount (mm)</li>
            <li><strong>FFMC</strong> - Fine Fuel Moisture Code</li>
            <li><strong>DMC</strong> - Duff Moisture Code</li>
            <li><strong>DC</strong> - Drought Code</li>
            <li><strong>ISI</strong> - Initial Spread Index</li>
            <li><strong>BUI</strong> - Buildup Index</li>
          </ul>
          <p style="margin-top: 15px; color: #666">
            <strong>Note:</strong> All 9 columns must be present in your CSV
            file. Extra columns are allowed and will be included in the results.
          </p>
        </div>

        <div class="example-section">
          <h3>üìã Example CSV Format</h3>
          <code
            >Temperature,RH,Ws,Rain,FFMC,DMC,DC,ISI,BUI
            29,57,18,0,65.7,3.4,7.6,1.3,3.4 35,30,25,0,90.5,50.2,200.3,15.5,80.4
            25,80,10,5.5,45.0,10.0,50.0,2.0,20.0</code
          >
          <a
            href="#"
            class="download-sample"
            onclick="downloadSample(); return false;"
          >
            ‚¨áÔ∏è Download Sample CSV
          </a>
        </div>
      </div>
    </div>

    <script>
      const fileInput = document.getElementById("fileInput");
      const fileName = document.getElementById("fileName");
      const submitBtn = document.getElementById("submitBtn");

      fileInput.addEventListener("change", function () {
        if (this.files && this.files[0]) {
          fileName.textContent = "üìÑ " + this.files[0].name;
          submitBtn.disabled = false;
        } else {
          fileName.textContent = "No file selected";
          submitBtn.disabled = true;
        }
      });

      function downloadSample() {
        const csvContent = `Temperature,RH,Ws,Rain,FFMC,DMC,DC,ISI,BUI
29,57,18,0,65.7,3.4,7.6,1.3,3.4
35,30,25,0,90.5,50.2,200.3,15.5,80.4
25,80,10,5.5,45.0,10.0,50.0,2.0,20.0
30,45,20,0,75.0,25.0,100.0,8.0,40.0
28,65,15,2.0,60.0,15.0,80.0,5.0,30.0`;

        const blob = new Blob([csvContent], { type: "text/csv" });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "sample_fwi_dataset.csv";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
      }

      function toggleTheme() {
        const body = document.body;
        const themeIcon = document.getElementById("themeIcon");
        const themeText = document.getElementById("themeText");

        body.classList.toggle("dark-mode");

        if (body.classList.contains("dark-mode")) {
          themeIcon.textContent = "‚òÄÔ∏è";
          themeText.textContent = "Light";
          localStorage.setItem("theme", "dark");
        } else {
          themeIcon.textContent = "üåô";
          themeText.textContent = "Dark";
          localStorage.setItem("theme", "light");
        }
      }

      window.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        const themeIcon = document.getElementById("themeIcon");
        const themeText = document.getElementById("themeText");

        if (savedTheme === "dark") {
          document.body.classList.add("dark-mode");
          themeIcon.textContent = "‚òÄÔ∏è";
          themeText.textContent = "Light";
        }
      });
    </script>
  </body>
</html>
